<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="しろたんバス">
<meta name="theme-color" content="#eaf4fb">
<meta name="description" content="しろたんシャトルバス時刻表アプリ">
<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">
<link rel="manifest" href="manifest.json">
<title>しろたんバス</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
    --safe-t:env(safe-area-inset-top,0px);
    --safe-b:env(safe-area-inset-bottom,0px);
    --bg:#eaf4fb;
    --card:#fff;
    --card2:#f0f7fc;
    --text:#4a3728;
    --text2:#8b7565;
    --text3:#bca99a;
    --blue:#7ec8e3;
    --blue2:#a8ddf0;
    --blue3:#5ab4d6;
    --pink:#f2b5c8;
    --pink2:#f8d0de;
    --pink3:#e8879f;
    --accent:var(--blue3);
    --accent-bg:var(--blue);
    --accent-light:var(--blue2);
    --shadow:0 2px 12px rgba(74,55,40,.06);
    --shadow2:0 4px 20px rgba(74,55,40,.08);
    --r:20px;
    --r-sm:14px;
    --r-xs:10px;
    --ease:cubic-bezier(.4,0,.2,1);
}
.mansion{--accent:var(--pink3);--accent-bg:var(--pink);--accent-light:var(--pink2)}

html,body{background:var(--bg);overflow-x:hidden}
body{
    font-family:'Nunito',-apple-system,system-ui,sans-serif;
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -webkit-tap-highlight-color:transparent;
    overscroll-behavior-y:none;
    min-height:100dvh;
}

/* === CLOUDS BG === */
.clouds{
    position:fixed;top:0;left:0;right:0;height:260px;
    pointer-events:none;z-index:0;overflow:hidden;
    background:linear-gradient(180deg,#dceef8 0%,var(--bg) 100%);
}
.cloud{
    position:absolute;background:#fff;border-radius:50%;opacity:.5;
}
.cloud:nth-child(1){width:120px;height:40px;top:60px;left:10%;animation:float 20s ease-in-out infinite}
.cloud:nth-child(2){width:80px;height:28px;top:90px;right:15%;animation:float 16s ease-in-out infinite reverse}
.cloud:nth-child(3){width:100px;height:34px;top:40px;left:55%;animation:float 24s ease-in-out infinite 2s}
@keyframes float{0%,100%{transform:translateX(0)}50%{transform:translateX(20px)}}

/* === SHELL === */
.shell{
    position:relative;z-index:1;
    max-width:420px;margin:0 auto;
    padding:calc(var(--safe-t)+16px) 16px calc(var(--safe-b)+24px);
}
@media(display-mode:standalone){
    .shell{padding-top:calc(var(--safe-t)+12px)}
}

/* === HEADER === */
.hdr{
    display:flex;align-items:center;justify-content:space-between;
    margin-bottom:20px;padding:0 2px;
}
.hdr-left{display:flex;align-items:center;gap:10px}
.hdr-icon{
    width:42px;height:42px;border-radius:14px;overflow:hidden;
    background:#fff;box-shadow:var(--shadow);flex-shrink:0;
}
.hdr-icon img{width:100%;height:100%;object-fit:cover}
.hdr-title{font-size:18px;font-weight:900;color:var(--text);letter-spacing:-.01em}
.hdr-right{display:flex;align-items:center;gap:8px}
.hdr-clock{
    font-size:14px;font-weight:700;color:var(--text3);
    font-variant-numeric:tabular-nums;
}
.hdr-badge{
    display:flex;align-items:center;gap:4px;
    padding:5px 10px;border-radius:99px;font-size:10px;font-weight:800;
    letter-spacing:.03em;
}
.hdr-badge.on{background:rgba(34,197,94,.12);color:#16a34a}
.hdr-badge.off{background:rgba(234,179,8,.12);color:#ca8a04}
.hdr-dot{width:5px;height:5px;border-radius:50%;background:currentColor}
.hdr-badge.on .hdr-dot{animation:blink 2s ease-in-out infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.25}}

/* === HERO === */
.hero{
    background:var(--card);border-radius:var(--r);
    padding:24px 16px 20px;box-shadow:var(--shadow2);
    text-align:center;position:relative;overflow:hidden;
    transition:opacity .28s var(--ease);
}
.hero.fade{opacity:0}
.hero-mascot{
    width:72px;height:72px;border-radius:50%;
    margin:0 auto 14px;overflow:hidden;
    background:var(--card2);
    box-shadow:0 3px 16px rgba(126,200,227,.2);
}
.hero-mascot img{width:100%;height:100%;object-fit:cover}
.hero-route{
    display:inline-flex;align-items:center;gap:5px;
    font-size:10px;font-weight:800;color:var(--accent);
    text-transform:uppercase;letter-spacing:.14em;
    margin-bottom:12px;
}
.hero-route svg{width:12px;height:12px;opacity:.6}
.hero-time{
    font-size:clamp(56px,16vw,76px);font-weight:900;
    letter-spacing:-.04em;line-height:.9;color:var(--text);
}
.hero-time.urgent{animation:bounce .8s ease-in-out infinite}
@keyframes bounce{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}
.hero-sub{
    margin-top:10px;font-size:14px;font-weight:600;color:var(--text2);
    display:flex;align-items:center;justify-content:center;gap:4px;
}
.hero-sub b{font-size:20px;font-weight:900;color:var(--accent)}
.hero-sub.urgent b{font-size:24px}
.hero-sub.now{color:var(--accent);font-weight:800}
.hero-tmrw{
    display:inline-block;font-size:9px;font-weight:800;
    background:var(--accent-light);color:var(--accent);
    padding:2px 7px;border-radius:5px;margin-left:4px;letter-spacing:.04em;
}
.bar{
    width:160px;height:4px;margin:16px auto 0;
    background:var(--card2);border-radius:99px;overflow:hidden;
}
.bar-fill{
    height:100%;border-radius:99px;
    background:linear-gradient(90deg,var(--accent-bg),var(--accent));
    transition:width 1s linear;
}

/* === UPCOMING === */
.upcoming{
    display:flex;gap:8px;margin-top:16px;
    justify-content:center;overflow-x:auto;
    scrollbar-width:none;padding:2px 0;
}
.upcoming::-webkit-scrollbar{display:none}
.up{
    flex-shrink:0;padding:10px 14px;text-align:center;
    background:var(--card2);border-radius:var(--r-xs);
    transition:transform .1s;
}
.up:active{transform:scale(.95)}
.up-t{font-size:15px;font-weight:800;color:var(--text);letter-spacing:-.01em}
.up-m{font-size:10px;font-weight:700;color:var(--text3);margin-top:2px}
.up-tmrw{font-size:8px;font-weight:800;color:var(--accent);margin-top:2px}

/* === EMPTY STATE === */
.empty{padding:36px 0;text-align:center}
.empty-icon{
    width:64px;height:64px;margin:0 auto 14px;border-radius:50%;
    background:var(--card2);display:flex;align-items:center;justify-content:center;
}
.empty-icon svg{width:28px;height:28px;color:var(--text3)}
.empty h3{font-size:16px;font-weight:800;color:var(--text2);margin-bottom:4px}
.empty p{font-size:12px;color:var(--text3);font-weight:600}

/* === TOGGLE === */
.seg{
    display:flex;padding:4px;margin:16px 0;
    background:var(--card);border-radius:var(--r-sm);
    box-shadow:var(--shadow);position:relative;
}
.seg-slider{
    position:absolute;top:4px;left:4px;
    width:calc(50% - 4px);height:calc(100% - 8px);
    border-radius:var(--r-xs);
    background:var(--accent);
    transition:transform .32s var(--ease),background .4s;
}
.mansion .seg-slider{transform:translateX(calc(100% + 4px))}
.seg-btn{
    flex:1;position:relative;z-index:1;
    padding:12px;border:none;background:none;
    font-family:inherit;font-size:13px;font-weight:800;
    color:var(--text3);cursor:pointer;
    display:flex;align-items:center;justify-content:center;gap:6px;
    transition:color .3s,transform .1s;
}
.seg-btn:active{transform:scale(.96)}
.seg-btn.on{color:#fff}
.seg-btn svg{width:15px;height:15px}

/* === SCHEDULE === */
.tbl{
    background:var(--card);border-radius:var(--r);
    padding:16px 12px;box-shadow:var(--shadow2);
    transition:opacity .28s var(--ease);
}
.tbl.fade{opacity:0}
.tbl-head{
    display:flex;justify-content:space-between;align-items:center;
    padding:0 6px 12px;
}
.tbl-head h2{font-size:12px;font-weight:800;color:var(--text3);letter-spacing:.08em}
.tbl-head span{font-size:10px;color:var(--text3);font-weight:700}
.tr{
    display:flex;align-items:center;padding:9px 6px;
    border-bottom:1px solid rgba(74,55,40,.04);
}
.tr:last-child{border-bottom:none}
.tr.past{opacity:.18}
.tr.cur{
    background:var(--card2);margin:2px -6px;padding:9px 12px;
    border-radius:var(--r-xs);border-bottom:none;
}
.tr-h{
    width:40px;font-size:13px;font-weight:800;color:var(--text2);
    font-variant-numeric:tabular-nums;flex-shrink:0;
}
.tr-h small{font-size:9px;font-weight:600;opacity:.5}
.tr.cur .tr-h{color:var(--accent)}
.tr-m{display:flex;flex-wrap:wrap;gap:5px;flex:1}
.p{
    font-size:11px;font-weight:700;padding:3px 7px;border-radius:5px;
    color:var(--text2);font-variant-numeric:tabular-nums;
}
.p.gone{opacity:.2;text-decoration:line-through}
.p.next{
    background:var(--accent);color:#fff;font-weight:800;
    box-shadow:0 2px 8px rgba(90,180,214,.25);
}
.p.live{
    background:var(--accent);color:#fff;font-weight:800;
    animation:pop 1.4s ease-in-out infinite;
    box-shadow:0 2px 8px rgba(90,180,214,.25);
}
@keyframes pop{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
.tr-nil{font-size:10px;color:var(--text3);font-style:italic;font-weight:600}

/* === FLOATING === */
.fab{
    position:fixed;top:calc(var(--safe-t)+8px);left:50%;
    transform:translateX(-50%) translateY(-28px);
    opacity:0;z-index:100;pointer-events:none;
    padding:7px 16px;
    background:rgba(255,255,255,.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
    border-radius:99px;box-shadow:0 4px 20px rgba(74,55,40,.1);
    display:flex;align-items:center;gap:8px;
    transition:all .3s var(--ease);
}
.fab.show{opacity:1;transform:translateX(-50%) translateY(0)}
.fab-dir{font-size:9px;font-weight:800;color:var(--text3);padding-right:8px;border-right:1px solid rgba(74,55,40,.08)}
.fab-time{font-size:15px;font-weight:900;color:var(--accent);letter-spacing:-.02em}
.fab-mins{font-size:11px;font-weight:700;color:var(--text2)}

/* === PTR === */
.ptr{
    position:fixed;top:calc(var(--safe-t) - 36px);left:50%;
    transform:translateX(-50%);z-index:200;
    width:30px;height:30px;border-radius:50%;
    background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.08);
    display:flex;align-items:center;justify-content:center;
    transition:top .2s,opacity .2s;opacity:0;pointer-events:none;
}
.ptr.show{opacity:1;top:calc(var(--safe-t)+12px)}
.ptr.spin svg{animation:spin .5s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* === FOOTER === */
.foot{text-align:center;margin-top:24px;padding-bottom:8px}
.foot img{width:48px;height:48px;border-radius:50%;opacity:.3}
</style>
</head>
<body>
<div class="station" id="app">
    <div class="clouds"><div class="cloud"></div><div class="cloud"></div><div class="cloud"></div></div>

    <div class="ptr" id="ptr">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="#8b7565" stroke-width="2.5" stroke-linecap="round"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
    </div>

    <div class="fab" id="fab">
        <span class="fab-dir" id="fabDir">辻堂駅</span>
        <span class="fab-time" id="fabTime">--:--</span>
        <span class="fab-mins" id="fabMins"></span>
    </div>

    <div class="shell">
        <header class="hdr">
            <div class="hdr-left">
                <div class="hdr-icon"><img src="icon.png" alt="しろたん"></div>
                <span class="hdr-title">しろたんバス</span>
            </div>
            <div class="hdr-right">
                <span class="hdr-clock" id="clock"></span>
                <div class="hdr-badge on" id="badge"><span class="hdr-dot"></span><span id="badgeTxt">運行中</span></div>
            </div>
        </header>

        <div class="hero" id="heroCard">
            <div id="hero"></div>
        </div>

        <div class="seg">
            <div class="seg-slider"></div>
            <button class="seg-btn on" id="btnS" onclick="go('station')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="16" x="4" y="3" rx="2"/><path d="M4 11h16M12 3v8M8 19l-2 3M18 22l-2-3"/><circle cx="8" cy="15" r="1"/><circle cx="16" cy="15" r="1"/></svg>
                辻堂駅
            </button>
            <button class="seg-btn" id="btnM" onclick="go('mansion')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                マンション
            </button>
        </div>

        <section class="tbl" id="tblCard">
            <div class="tbl-head"><h2>時刻表</h2><span>平日のみ運行</span></div>
            <div id="tbl"></div>
        </section>

        <div class="foot"><img src="icon.png" alt=""></div>
    </div>
</div>

<script>
const DATA={
    station:{
        6:[0,15,30,45],7:[0,10,15,25,30,40,45,55],8:[0,20,40],
        9:[0,20,40],10:[0,20,40],11:[0,20,40],12:[0,20,40],13:[0],14:[],
        15:[0,20,40],16:[0,20,40],17:[0,20,40],18:[0,20,40],
        19:[0,15,30,45],20:[0,20,40],21:[0,20,40],22:[0]
    },
    mansion:{
        6:[5,20,35,50],7:[5,15,20,30,35,45,50],8:[0,5,25,45],
        9:[5,25,45],10:[5,25,45],11:[5,25,45],12:[5,25,45],13:[5],14:[],
        15:[5,25,45],16:[5,25,45],17:[5,25,45],18:[5,25,45],
        19:[5,20,35,50],20:[5,25,45],21:[5,25,45],22:[5]
    }
};
const LBL={station:'辻堂駅',mansion:'マンション'};

function jpHol(y){
    const s=new Set(),a=(m,d)=>s.add(`${y}-${m}-${d}`);
    a(1,1);a(2,11);a(2,23);a(4,29);a(5,3);a(5,4);a(5,5);a(8,11);a(11,3);a(11,23);
    const nm=(mo,n)=>{const f=new Date(y,mo-1,1),d=f.getDay(),fm=d<=1?1+(1-d):1+(8-d);return fm+(n-1)*7};
    a(1,nm(1,2));a(7,nm(7,3));a(9,nm(9,3));a(10,nm(10,2));
    a(3,Math.floor(20.8431+.242194*(y-1980)-Math.floor((y-1980)/4)));
    a(9,Math.floor(23.2488+.242194*(y-1980)-Math.floor((y-1980)/4)));
    for(const h of[...s]){const[,m,d]=h.split('-').map(Number);if(new Date(y,m-1,d).getDay()===0)a(m,d+1)}
    return s;
}
let hc={};
function isOff(d){const y=d.getFullYear();if(!hc[y])hc[y]=jpHol(y);return d.getDay()===0||d.getDay()===6||hc[y].has(`${y}-${d.getMonth()+1}-${d.getDate()}`)}

let dir=localStorage.getItem('sbus-dir')||'station';
let now=new Date(),nxt=null;
const $=id=>document.getElementById(id);
const pad=n=>String(n).padStart(2,'0');

function getBuses(n=4){
    const sc=DATA[dir],h=now.getHours(),m=now.getMinutes(),o=[];
    for(let hr=h;hr<=22&&o.length<n;hr++)
        for(const mn of(sc[hr]||[])){if(hr===h&&mn<m)continue;o.push({h:hr,m:mn,now:hr===h&&mn===m});if(o.length>=n)break}
    for(let hr=6;hr<=22&&o.length<n;hr++)
        for(const mn of(sc[hr]||[])){o.push({h:hr,m:mn,tm:true});if(o.length>=n)break}
    return o;
}
function mTo(b){if(b.now)return 0;const t=new Date(now);t.setHours(b.h,b.m,0,0);if(b.tm)t.setDate(t.getDate()+1);return Math.max(0,Math.floor((t-now)/6e4))}

function go(d){
    if(d===dir)return;dir=d;localStorage.setItem('sbus-dir',d);
    $('app').className=d;
    $('btnS').className=`seg-btn ${d==='station'?'on':''}`;
    $('btnM').className=`seg-btn ${d==='mansion'?'on':''}`;
    if(navigator.vibrate)navigator.vibrate(8);
    fadeRender();
}

function clock(){$('clock').textContent=pad(now.getHours())+':'+pad(now.getMinutes())}

function rHero(bs){
    const off=isOff(now);
    $('badge').className=`hdr-badge ${off?'off':'on'}`;
    $('badgeTxt').textContent=off?'運休日':'運行中';
    if(off){nxt=null;$('hero').innerHTML=`<div class="empty"><div class="empty-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/></svg></div><h3>本日は運休です</h3><p>平日のみ運行しています</p></div>`;return}
    if(!bs.length){nxt=null;$('hero').innerHTML=`<div class="empty"><div class="empty-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div><h3>本日の運行は終了</h3><p>始発 6:00</p></div>`;return}
    const b=bs[0],mn=mTo(b),up=bs.slice(1,4),pct=Math.max(0,100-(mn/60*100)),urg=!b.now&&mn<=3;
    nxt={t:pad(b.h)+':'+pad(b.m),mn};
    let s=`<div class="hero-mascot"><img src="icon.png" alt="しろたん"></div>
        <div class="hero-route"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>${LBL[dir]}</div>
        <div class="hero-time${urg?' urgent':''}">${pad(b.h)}:${pad(b.m)}</div>
        <div class="hero-sub${urg?' urgent':''}${b.now?' now':''}">`;
    if(b.now)s+=`<b>まもなく発車</b>`;
    else s+=`あと <b>${mn}</b> 分${b.tm?'<span class="hero-tmrw">明日</span>':''}`;
    s+=`</div><div class="bar"><div class="bar-fill" style="width:${b.now?100:pct}%"></div></div>`;
    if(up.length){
        s+=`<div class="upcoming">`;
        for(const u of up){const m=mTo(u);s+=`<div class="up"><div class="up-t">${pad(u.h)}:${pad(u.m)}</div><div class="up-m">${m}分後</div>${u.tm?'<div class="up-tmrw">明日</div>':''}</div>`}
        s+=`</div>`;
    }
    $('hero').innerHTML=s;
    $('fabDir').textContent=LBL[dir];$('fabTime').textContent=nxt.t;
    $('fabMins').textContent=b.now?'まもなく':nxt.mn+'分';
}

function rTbl(bs){
    const sc=DATA[dir],h=now.getHours(),m=now.getMinutes(),nb=bs.length?bs[0]:null;
    let s='';
    for(let hr=6;hr<=22;hr++){
        const ms=sc[hr]||[];if(!ms.length&&(hr<10||hr>20))continue;
        const pa=hr<h,cu=hr===h;let c='tr';if(pa)c+=' past';if(cu)c+=' cur';
        s+=`<div class="${c}" id="r${hr}"><div class="tr-h">${hr}<small>時</small></div><div class="tr-m">`;
        if(!ms.length)s+=`<span class="tr-nil">—</span>`;
        else for(const mn of ms){
            const g=pa||(cu&&mn<m),lv=cu&&mn===m,nx=nb&&nb.h===hr&&nb.m===mn&&!nb.tm&&!lv;
            let cl='p';if(g)cl+=' gone';if(lv)cl+=' live';if(nx)cl+=' next';
            s+=`<span class="${cl}">${pad(mn)}</span>`;
        }
        s+=`</div></div>`;
    }
    $('tbl').innerHTML=s;
}

function render(){clock();const b=getBuses();rHero(b);rTbl(b)}
function fadeRender(){
    const h=$('heroCard'),t=$('tblCard');
    h.classList.add('fade');t.classList.add('fade');
    setTimeout(()=>{render();h.classList.remove('fade');t.classList.remove('fade')},280);
}
function scrollCur(){const r=$(`r${now.getHours()}`)||$(`r${now.getHours()+1}`);if(r)r.scrollIntoView({behavior:'smooth',block:'center'})}

/* floating */
const heroCard=$('heroCard'),fab=$('fab');
window.addEventListener('scroll',()=>{
    if(!nxt){fab.classList.remove('show');return}
    fab.classList.toggle('show',heroCard.getBoundingClientRect().bottom<60);
},{passive:true});

/* swipe */
let sx=0,sy=0;
document.addEventListener('touchstart',e=>{sx=e.touches[0].clientX;sy=e.touches[0].clientY},{passive:true});
document.addEventListener('touchend',e=>{
    const dx=e.changedTouches[0].clientX-sx,dy=e.changedTouches[0].clientY-sy;
    if(Math.abs(dx)>60&&Math.abs(dx)>Math.abs(dy)*2){
        if(dx<0&&dir==='station')go('mansion');else if(dx>0&&dir==='mansion')go('station');
    }
},{passive:true});

/* ptr */
const ptr=$('ptr');let py=0,pa=false;
window.addEventListener('touchstart',e=>{if(!window.scrollY){py=e.touches[0].clientY;pa=true}},{passive:true});
window.addEventListener('touchmove',e=>{if(!pa)return;ptr.classList.toggle('show',e.touches[0].clientY-py>50&&!window.scrollY)},{passive:true});
window.addEventListener('touchend',()=>{if(!pa)return;pa=false;if(ptr.classList.contains('show')){ptr.classList.add('spin');now=new Date();render();setTimeout(()=>ptr.classList.remove('show','spin'),400)}},{passive:true});

/* init */
$('app').className=dir;
$('btnS').className=`seg-btn ${dir==='station'?'on':''}`;
$('btnM').className=`seg-btn ${dir==='mansion'?'on':''}`;
if('serviceWorker'in navigator)navigator.serviceWorker.register('sw.js').catch(()=>{});
render();setTimeout(scrollCur,300);
setInterval(()=>{const p=now.getMinutes();now=new Date();clock();if(now.getMinutes()!==p)render()},1000);
</script>
</body>
</html>
